<template>
<div class="container">
    <div class="login has-text-centered columns">
        <div class="column">
            <h4 class="title is-4">管理后台</h4>
            <a v-for="(item, idx) in state.auth" :key="idx" :href="item.url"  class="button is-medium is-white" :title="item.name">
            <span class="icon is-medium">
                <svg v-if="item.type === 'github'" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                    <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512" fill="#2c2c2c"></path>
                </svg>
                <svg v-if="item.type === 'weibo'" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                    <path d="M430.848 867.114667c-169.685333 16.682667-316.330667-59.989333-327.338667-171.52-11.050667-111.317333 117.717333-215.338667 287.573334-232.149334 169.770667-16.810667 316.288 59.904 327.296 171.434667 11.050667 110.933333-117.717333 215.424-287.445334 232.064l-0.085333 0.170667zM386.133333 734.677333c-16.384 26.282667-51.541333 37.717333-78.037333 25.685334-26.112-11.904-33.834667-42.282667-17.322667-67.968 16.170667-25.386667 50.176-36.736 76.501334-25.642667 26.538667 11.221333 34.986667 41.472 18.858666 67.925333z m54.186667-69.418666c-6.016 10.112-19.157333 15.061333-29.397333 10.794666-10.069333-3.84-13.354667-15.402667-7.552-25.002666 5.888-9.685333 18.602667-14.762667 28.672-10.24 10.197333 3.84 13.44 15.36 7.68 25.642666l0.597333-1.194666z m7.509333-116.010667c-80.768-21.034667-172.074667 19.2-207.232 90.368-35.669333 72.704-1.109333 153.216 80.469334 179.626667 84.608 27.306667 184.234667-14.549333 218.965333-92.970667 34.133333-76.501333-8.576-155.392-92.202667-177.024z m322.688-52.224c-14.762667-4.48-24.32-7.68-17.28-26.24 16-41.685333 17.92-76.970667 0-102.570667-33.322667-47.445333-124.373333-44.928-228.864-1.28 0 0-32.682667 14.122667-24.362666-11.562666 16.042667-51.925333 13.44-94.890667-11.52-119.850667-57.088-57.045333-207.744 1.92-336.554667 131.413333C55.850667 463.786667 0 566.314667 0 654.848c0 169.856 217.557333 272.853333 430.336 272.853333 278.869333 0 464.554667-162.176 464.554667-290.986666 0-77.738667-66.005333-121.770667-124.373334-140.117334v0.426667z m81.408-217.258667a132.309333 132.309333 0 0 0-126.293333-41.045333 33.536 33.536 0 0 0-26.282667 39.765333 33.706667 33.706667 0 0 0 39.765334 25.685334 64.512 64.512 0 0 1 61.525333 19.84c16.042667 17.962667 19.882667 41.685333 13.482667 62.848a33.536 33.536 0 0 0 21.76 42.325333 34.688 34.688 0 0 0 42.325333-21.845333 132.608 132.608 0 0 0-27.562667-129.493334l1.28 1.92z m103.168-93.653333c-67.242667-74.965333-166.613333-103.210667-258.304-83.968a38.826667 38.826667 0 0 0-30.122666 46.122667 38.826667 38.826667 0 0 0 46.165333 30.165333 192 192 0 0 1 183.296 59.008 193.408 193.408 0 0 1 40.405333 188.416 38.826667 38.826667 0 0 0 25.002667 49.365333c20.437333 7.04 42.282667-4.437333 49.365333-25.002666a272.512 272.512 0 0 0-57.088-266.026667l1.28 1.92z" fill="#2c2c2c"></path>
                </svg>
            </span>
            </a>
        </div>
    </div>
</div>
</template>

<script>
import {Get} from "@/tools/http";
import { onMounted, reactive } from 'vue';

const API = {
    config: "/auth/config"
}

export default {
    name: "Login",
    setup() {
        const state = reactive({
            auth: []
        })

        async function fetchConfig() {
            try {
                let resp = await Get(API.config, {from: "admin"})
                if (resp.data.code === 10000) {
                    state.auth = resp.data.data;
                } else {
                    console.log(resp.data.msg);
                }
            } catch(err) {
                console.log(err)
            }
        }

        onMounted(fetchConfig)

        return {
            state
        }
    }
}
</script>

<style scoped>
.login {
    margin: 4rem auto;
    height: 40%;
}
</style>
